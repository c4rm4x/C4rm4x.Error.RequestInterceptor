"use strict";var errorsMain=angular.module("angular-errors-main",["angular-errors-services"]),errorsServices=angular.module("angular-errors-services",[]);errorsServices.service("errorsConfig",[function(){this.configuration={log:!1,apiEndPoint:"",app:""},this.getConfiguration=function(){return this.configuration},this.setConfiguration=function(a){this.configuration.log=a.log||!1,this.configuration.apiEndPoint=a.apiEndPoint||"",this.configuration.app=a.app||""}}]),errorsServices.service("errorsLogger",["$injector","errorsConfig",function(a,b){this.http,this.log=function(c){return b.getConfiguration().log&&b.getConfiguration().apiEndPoint!==c.config.url?(this.http=this.http||a.get("$http"),this.http.post(b.getConfiguration().apiEndPoint,{error:JSON.stringify(c.data),appIdentifier:b.getConfiguration().app})):void 0}}]),errorsServices.service("forbiddenRequestProcessor",[function(){this.process=function(a){403===a.status&&(a.data="You have no power here!")}}]),errorsServices.service("badRequestProcessor",[function(){this.process=function(a){400===a.status&&(a.config.errors=a.data.validationErrors||[],a.data="Check errors for more details")}}]),errorsServices.service("internalServerErrorProcessor",["errorsLogger",function(a){this.process=function(b){if(500===b.status){var c=b.data.code||"";""===c||"UNKNOWN"===c?(a.log(b.data),b.data="An unexpected error has occurred"):b.data=b.data.description}}}]),errorsServices.service("errorsManager",["forbiddenRequestProcessor","badRequestProcessor","internalServerErrorProcessor",function(a,b,c){this.processError=function(d){400===d.status?b.process(d):403===d.status?a.process(d):500===d.status&&c.process(d)}}]),errorsServices.service("errorsRequestInterceptor",["$q","errorsManager",function(a,b){this.responseError=function(c){return 400!==c.status&&403!==c.status&&500!==c.status||b.processError(c),a.reject(c)}}]);